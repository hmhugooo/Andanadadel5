<!doctype html> 
<html lang="es"> 
<head> 
  <meta charset="utf-8" /> 
  <meta name="viewport" content="width=device-width,initial-scale=1" /> 
  <title>Andanada del 5 — Acceso</title> 
  <meta name="robots" content="noindex" /> 
  <style> 
    body{margin:0;height:100vh;display:flex;align-items:center;justify-content:center;background:#0b0b0b;color:#fff;font-family:system-ui,-apple-system,sans-serif} 
    .box{max-width:520px;padding:28px 22px;border-radius:16px;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.10);text-align:center} 
    .small{opacity:.7;font-size:13px;margin-top:8px} 
  </style> 
</head> 
<body> 
  <div class="box"> 
    <div style="letter-spacing:.14em;text-transform:uppercase;font-size:12px;opacity:.75;">Andanada del 5</div> 
    <h2 style="margin:10px 0 6px;font-weight:650;">Abriendo acceso seguro…</h2> 
    <div class="small">Si no se abre nada, espera 2–3 segundos.</div> 
  </div> 

  <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script> 
  <script> 
    (function () { 
      function getParam(name) { 
        const url = new URL(window.location.href); 
        const qs = url.searchParams.get(name); 
        if (qs) return qs; 

        // También puede venir en el hash (/#invite_token=...) 
        const hash = (window.location.hash || "").replace(/^#/, ""); 
        const hp = new URLSearchParams(hash); 
        return hp.get(name); 
      } 

      function openModal() { 
        if (!window.netlifyIdentity) return; 
        window.netlifyIdentity.init(); 

        // Si hay token, abrir modal (invitation/recovery) 
        const invite = getParam("invite_token"); 
        const recovery = getParam("recovery_token"); 
        const token = invite || recovery; 

        if (token) { 
          window.netlifyIdentity.open(); 
        } else { 
          // Si no hay token, abrir igualmente para login manual 
          window.netlifyIdentity.open(); 
        } 

        window.netlifyIdentity.on("login", function () { 
          window.location.href = "/admin/"; 
        }); 
      } 

      if (document.readyState === "complete") openModal(); 
      else window.addEventListener("load", openModal); 
    })(); 
  </script> 
</body> 
</html>